# $(1) -- case
define PLOT_PATCH_DATA_CASE_TEMPLATE

  $(eval $(call CASE_TEMPLATE,$(1)))
  $(eval $(call DUMMY_SYSTEM_FILES_TEMPLATE,$(1)))

endef

# $(1) -- case
# $(2) -- tag
# $(3) -- gmtDict
# $(4) -- time
define PLOT_PATCH_DATA_TEMPLATE

  $(1)/$(4)/$(3).eps: \
    $(addprefix $(1)/,$(SYSTEM_FILES)) \
    $(1)/$(GMT_DICTS)/$(3)
	$(PLOT_PATCH_DATA) -case $(1) -time $(4) $(3) > $(2).plotPatchData.$(3).log

  $(1)/$(GMT_DICTS)/$(3): $(COMMON_CASE)/$(GMT_DICTS)/$(3) | $(1)/$(GMT_DICTS)
	$(LN) -fs $$< $$@

endef

# $(1) -- case
# $(2) -- tag
# $(3) -- gmtDict
# $(4) -- end time
# $(5) -- original field (e.g. theta)
# $(6) -- diffed field (e.g. thetaDiff)
define PLOT_DIFF_TEMPLATE

  $(eval $(call PLOT_PATCH_DATA_TEMPLATE,$(1),$(2),$(3),$(4)))

  $(1)/$(4)/$(3).eps: $(1)/$(4)/$(6)

  $(1)/$(4)/$(6):
	$(SUM_FIELDS) -case $(1) $(4) $(6) $(4) $(5) 0 $(5) -scale0 1 -scale1 -1 > $(2).sumFields.$(6).log

endef

# $(1) -- case
# $(2) -- tag
# $(3) -- gmtDict
# $(4) -- time
# $(5) -- approximate field (e.g. T)
# $(6) -- analytic field (e.g. T_analytic)
# $(7) -- diffed field (e.g. Tdiff)
define PLOT_MULTIDIFF_TEMPLATE

  $(eval $(call PLOT_PATCH_DATA_TEMPLATE,$(1),$(2),$(3),$(4)))

  $(1)/$(4)/$(3).eps: $(1)/$(4)/$(7)

  $(1)/$(4)/$(7): $(1)/0/$(6) $(1)/$(4)/$(5)
	$(SUM_FIELDS) -case $(1) $(4) $(7) $(4) $(5) 0 $(6) -scale0 1 -scale1 -1 > $(2).sumFields.$(7).log

endef

$(eval $(call PLOT_PATCH_DATA_CASE_TEMPLATE,data/gravityWaves-btf-schaerExp-h))
$(eval $(call PLOT_PATCH_DATA_CASE_TEMPLATE,data/gravityWaves-btf-schaerExp-doubleHigh-h))
$(eval $(call PLOT_PATCH_DATA_CASE_TEMPLATE,data/gravityWaves-sleve-schaerExp-h))
$(eval $(call PLOT_PATCH_DATA_CASE_TEMPLATE,data/gravityWaves-sleve-schaerExp-doubleHigh-h))
$(eval $(call PLOT_PATCH_DATA_CASE_TEMPLATE,data/gravityWaves-snapCol-schaerExp-h))
$(eval $(call PLOT_PATCH_DATA_CASE_TEMPLATE,data/gravityWaves-snapCol-schaerExp-doubleHigh-h))

$(eval $(call PLOT_PATCH_DATA_TEMPLATE,data/gravityWaves-btf-schaerExp-h,data-gravityWaves-btf-schaerExp-h,w,18000))
$(eval $(call PLOT_PATCH_DATA_TEMPLATE,data/gravityWaves-sleve-schaerExp-h,data-gravityWaves-sleve-schaerExp-h,w,18000))
$(eval $(call PLOT_PATCH_DATA_TEMPLATE,data/gravityWaves-snapCol-schaerExp-h,data-gravityWaves-snapCol-schaerExp-h,w,18000))

$(eval $(call PLOT_PATCH_DATA_TEMPLATE,data/gravityWaves-btf-schaerExp-h,data-gravityWaves-btf-schaerExp-h,UfZoom,18000))
$(eval $(call PLOT_PATCH_DATA_TEMPLATE,data/gravityWaves-sleve-schaerExp-h,data-gravityWaves-sleve-schaerExp-h,UfZoom,18000))
$(eval $(call PLOT_PATCH_DATA_TEMPLATE,data/gravityWaves-snapCol-schaerExp-h,data-gravityWaves-snapCol-schaerExp-h,UfZoom,18000))

$(eval $(call PLOT_PATCH_DATA_TEMPLATE,data/gravityWaves-btf-schaerExp-h,data-gravityWaves-btf-schaerExp-h,divUf,18000))
$(eval $(call PLOT_PATCH_DATA_TEMPLATE,data/gravityWaves-sleve-schaerExp-h,data-gravityWaves-sleve-schaerExp-h,divUf,18000))
$(eval $(call PLOT_PATCH_DATA_TEMPLATE,data/gravityWaves-snapCol-schaerExp-h,data-gravityWaves-snapCol-schaerExp-h,divUf,18000))
$(eval $(call PLOT_PATCH_DATA_TEMPLATE,data/gravityWaves-btf-schaerExp-doubleHigh-h,data-gravityWaves-btf-schaerExp-doubleHigh-h,divUf,18000))
$(eval $(call PLOT_PATCH_DATA_TEMPLATE,data/gravityWaves-sleve-schaerExp-doubleHigh-h,data-gravityWaves-sleve-schaerExp-doubleHigh-h,divUf,18000))
$(eval $(call PLOT_PATCH_DATA_TEMPLATE,data/gravityWaves-snapCol-schaerExp-doubleHigh-h,data-gravityWaves-snapCol-schaerExp-doubleHigh-h,divUf,18000))

$(eval $(call PLOT_PATCH_DATA_TEMPLATE,data/gravityWaves-sleve-schaerExp-h,data-gravityWaves-sleve-schaerExp-h,nonlinearMomentumZoom,18000))
$(eval $(call PLOT_PATCH_DATA_TEMPLATE,data/gravityWaves-snapCol-schaerExp-h,data-gravityWaves-snapCol-schaerExp-h,nonlinearMomentumZoom,18000))

$(eval $(call PLOT_DIFF_TEMPLATE,data/gravityWaves-sleve-schaerExp-h,data-gravityWaves-sleve-schaerExp-h,thetaDiff,18000,theta,thetaDiff))
$(eval $(call PLOT_DIFF_TEMPLATE,data/gravityWaves-sleve-schaerExp-doubleHigh-h,data-gravityWaves-sleve-schaerExp-doubleHigh-h,nonlinearMomentumZoom,18000,theta,thetaDiff))
$(eval $(call PLOT_DIFF_TEMPLATE,data/gravityWaves-snapCol-schaerExp-h,data-gravityWaves-snapCol-schaerExp-h,thetaDiff,18000,theta,thetaDiff))
$(eval $(call PLOT_DIFF_TEMPLATE,data/gravityWaves-snapCol-schaerExp-doubleHigh-h,data-gravityWaves-snapCol-schaerExp-doubleHigh-h,nonlinearMomentumZoom,18000,theta,thetaDiff))

