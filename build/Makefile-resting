RESTING_END_TIME := 21600

# $(1) -- simulation case path
# $(2) -- subproject label
# $(3) -- mesh case path
define RESTING_H_OP_TEMPLATE

  $(eval $(call RESTING_TEMPLATE,$(1),$(2),$(3),$(EXNER_FOAM_H),$(SET_EXNER_BALANCED_H)))

  $(1)/$(CONTROL_DICT):
	$(LN) -fs $(COMMON_CASE)/$(CONTROL_DICT).resting.h $$@

  $(1)/$(FV_SCHEMES):
	$(LN) -fs $(COMMON_CASE)/$(FV_SCHEMES).resting.h $$@

endef

# $(1) -- simulation case path
# $(2) -- subproject label
# $(3) -- mesh case path
define RESTING_DPDX_TEMPLATE

  $(eval $(call RESTING_TEMPLATE,$(1),$(2),$(3),$(EXNER_FOAM),$(SET_EXNER_BALANCED)))

  $(1)/$(CONTROL_DICT):
	$(LN) -fs $(COMMON_CASE)/$(CONTROL_DICT).resting.dpdx $$@

  $(1)/$(FV_SCHEMES):
	$(LN) -fs $(COMMON_CASE)/$(FV_SCHEMES).resting.dpdx $$@

endef

# $(1) -- simulation case path
# $(2) -- subproject label
# $(3) -- mesh case path
# $(4) -- exnerFoam executable
# $(5) -- setExnerBalancedH executable
define RESTING_TEMPLATE

  $(eval $(call $(PHYSICAL_TEST_CASE_TEMPLATE),$(1),$(2),$(3),$(RESTING_END_TIME),$(4),$(5)))

  .PHONY: $(2) clean-$(2)

  all:: $(2)

  clean:: clean-$(2)

  $(2): $(addprefix $(1)/$(RESTING_END_TIME)/,$(FINAL_PHYSICAL_FIELDS))

  clean-$(2):
	$(RM) -r $(1)

  $(1)/$(THETA_INIT): $(COMMON_CASE)/$(THETA_INIT)
	$(CP) -fs $(COMMON_CASE)/$(THETA_INIT) $$@

  $(1)/$(EXNER_INIT): $(COMMON_CASE)/$(EXNER_INIT)
	$(CP) $(COMMON_CASE)/$(EXNER_INIT) $$@

  $(1)/$(INITIAL_UF_FIELD):
	$(LN) -fs $(COMMON_CASE)/$(INITIAL_UF_FIELD) $$@

  $(1)/$(ENVIRONMENTAL_PROPERTIES):
	$(LN) -fs $(COMMON_CASE)/$(ENVIRONMENTAL_PROPERTIES).resting $$@

  $(1)/$(THERMOPHYSICAL_PROPERTIES):
	$(LN) -fs $(COMMON_CASE)/$(THERMOPHYSICAL_PROPERTIES) $$@

  $(1)/$(FV_SOLUTION):
	$(LN) -fs $(COMMON_CASE)/$(FV_SOLUTION).resting $$@

endef

$(eval $(call RESTING_H_OP_TEMPLATE,openfoam/cases/resting/noOrography/h,resting-noOrography-h,openfoam/cases/mesh/noOrography/resting))
$(eval $(call RESTING_DPDX_TEMPLATE,openfoam/cases/resting/noOrography/dpdx,resting-noOrography-dpdx,openfoam/cases/mesh/noOrography/resting))
$(eval $(call RESTING_H_OP_TEMPLATE,openfoam/cases/resting/btf/schaerExp/h,resting-btf-schaerExp-h,openfoam/cases/mesh/btf/schaerExp/resting))
$(eval $(call RESTING_DPDX_TEMPLATE,openfoam/cases/resting/btf/schaerExp/dpdx,resting-btf-schaerExp-dpdx,openfoam/cases/mesh/btf/schaerExp/resting))
$(eval $(call RESTING_H_OP_TEMPLATE,openfoam/cases/resting/sleve/schaerExp,resting-sleve-schaerExp,openfoam/cases/mesh/sleve/schaerExp/resting))
$(eval $(call RESTING_H_OP_TEMPLATE,openfoam/cases/resting/snap/schaerExp/h,resting-snap-schaerExp-h,openfoam/cases/mesh/snap/schaerExp/resting))
$(eval $(call RESTING_DPDX_TEMPLATE,openfoam/cases/resting/snap/schaerExp/dpdx,resting-snap-schaerExp-dpdx,openfoam/cases/mesh/snap/schaerExp/resting))
$(eval $(call RESTING_H_OP_TEMPLATE,openfoam/cases/resting/snapCol/schaerExp/h,resting-snapCol-schaerExp-h,openfoam/cases/mesh/snapCol/schaerExp/resting))

