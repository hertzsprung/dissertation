clean:: clean-plots

# $(1) -- filename (without suffix)
define GNUPLOT_TEMPLATE

clean-plots:: clean-$(1)

clean-$(1):
	$(RM) $(1)-plot.tex $(1).eps $(1)-eps-converted-to.pdf

$(1)-plot.tex: $(1).plt
	$(GNUPLOT) -p -e "set output '$$@'; load '$$<'" 

endef

$(eval $(call GNUPLOT_TEMPLATE,btf))
$(eval $(call GNUPLOT_TEMPLATE,sleve))
$(eval $(call GNUPLOT_TEMPLATE,full-step))
$(eval $(call GNUPLOT_TEMPLATE,partial-step))
$(eval $(call GNUPLOT_TEMPLATE,cut-cell))
$(eval $(call GNUPLOT_TEMPLATE,advection-initial))
$(eval $(call GNUPLOT_TEMPLATE,advection-noOrography-analytic-contour))
$(eval $(call GNUPLOT_TEMPLATE,advection-btf-schaerCos-vanLeer-contour))
$(eval $(call GNUPLOT_TEMPLATE,advection-btf-schaerCos-tvdLimitedCubicUpwindCPCFit-contour))
$(eval $(call GNUPLOT_TEMPLATE,advection-sleve-schaerCos-vanLeer-contour))
$(eval $(call GNUPLOT_TEMPLATE,advection-snapCol-schaerCos-vanLeer-contour))
$(eval $(call GNUPLOT_TEMPLATE,resting-w))
$(eval $(call GNUPLOT_TEMPLATE,gravityWaves-schaerExp-h-exnerTheta))

btf.plt sleve.plt: tf.plt

resting-w.plt: \
  openfoam/cases/resting/btf/schaerExp/h/energy.dat \
  openfoam/cases/resting/sleve/schaerExp/h/energy.dat \
  openfoam/cases/resting/snapCol/schaerExp/h/energy.dat \
  openfoam/cases/resting/noOrography/h/energy.dat
