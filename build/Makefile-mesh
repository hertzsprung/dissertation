POLY_MESH_DIR := constant/polyMesh
BLOCK_MESH_DICT := $(POLY_MESH_DIR)/blockMeshDict

BOUNDARY := $(POLY_MESH_DIR)/boundary

MESH_FILES := \
  $(BOUNDARY) \
  $(POLY_MESH_DIR)/faces \
  $(POLY_MESH_DIR)/neighbour \
  $(POLY_MESH_DIR)/owner \
  $(POLY_MESH_DIR)/points

# $(1) -- case path
# $(2) -- subproject label
define MESH_TEMPLATE

  .PHONY: $(2) clean-$(2)

  $(2): $(addprefix $(1)/,$(MESH_FILES))

  clean-$(2):
	$(RM) -r $(1)

  $(1)/$(POLY_MESH_DIR):
	$(MKDIR) -p $(1)/$(POLY_MESH_DIR)

  $(1)/system:
	$(MKDIR) -p $(1)/system

  $(addprefix $(1)/,$(SYSTEM_FILES)): | $(1)/system

  $(1)/$(CONTROL_DICT):
	$(LN) -fs $(COMMON_CASE)/system/controlDictDummy $$@

  $(1)/$(FV_SCHEMES):
	$(LN) -fs $(COMMON_CASE)/system/fvSchemesDummy $$@

  $(1)/$(FV_SOLUTION):
	$(LN) -fs $(COMMON_CASE)/system/fvSolutionDummy $$@

endef
