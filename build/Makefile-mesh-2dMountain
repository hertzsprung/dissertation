ADD_2D_MOUNTAIN_DICT := constant/add2dMountainDict

# $(1) -- mountainous mesh case path
# $(2) -- subproject label (e.g. mesh-btf-schaerCos)
# $(3) -- no orography mesh case path (e.g. mesh-noOrography)
define 2DMOUNTAIN_TEMPLATE

  .INTERMEDIATE: $(2).intermediate

  $(addprefix $(1)/,$(MESH_FILES)): $(2).intermediate

  $(2).intermediate: $(1)/$(ADD_2D_MOUNTAIN_DICT) $(addprefix $(3)/,$(MESH_FILES))
	$(MKDIR) -p $(1)/$(POLY_MESH_DIR)
	$(CP) $(addprefix $(3)/,$(MESH_FILES)) $(1)/$(POLY_MESH_DIR)
	$(ADD_2D_MOUNTAIN) -case $(1) > $(2).add2dMountain.log

endef

$(eval $(call MESH_TEMPLATE,openfoam/cases/mesh/btf/schaerCos,mesh-btf-schaerCos))
$(eval $(call 2DMOUNTAIN_TEMPLATE,openfoam/cases/mesh/btf/schaerCos,mesh-btf-schaerCos,openfoam/cases/mesh/noOrography))
