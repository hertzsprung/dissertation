ADD_2D_MOUNTAIN_DICT := constant/add2dMountainDict

# $(1) -- mountainous mesh case path
# $(2) -- subproject label (e.g. mesh-btf-schaerCos)
# $(3) -- no orography mesh case path (e.g. mesh-noOrography)
# $(4) -- add2dMountainDict path
define 2DMOUNTAIN_TEMPLATE

  $(eval $(call MESH_TEMPLATE,$(1),$(2)))

  .INTERMEDIATE: $(2).intermediate $(2).add2dMountain

  $(addprefix $(1)/,$(MESH_FILES)): $(2).intermediate

  $(2).intermediate: $(2).add2dMountain

  $(2).add2dMountain: \
    $(4) \
    $(addprefix $(3)/,$(MESH_FILES)) \
    $(addprefix $(1)/,$(SYSTEM_FILES)) \
  | $(1)/$(POLY_MESH_DIR)
	$(CP) $(addprefix $(3)/,$(MESH_FILES)) $(1)/$(POLY_MESH_DIR)
	$(CP) $(4) $(1)/$(ADD_2D_MOUNTAIN_DICT)
	$(ADD_2D_MOUNTAIN) -case $(1) > $(2).add2dMountain.log

endef

$(eval $(call 2DMOUNTAIN_TEMPLATE,openfoam/cases/mesh/btf/schaerCos/advection,mesh-btf-schaerCos-advection,openfoam/cases/mesh/noOrography/advection,openfoam/cases/mesh/2dMountain/btf-schaerCos-advection.add2dMountainDict))
$(eval $(call 2DMOUNTAIN_TEMPLATE,openfoam/cases/mesh/btf/schaerCos/resting,mesh-btf-schaerCos-resting,openfoam/cases/mesh/noOrography/resting,openfoam/cases/mesh/2dMountain/btf-schaerCos-resting.add2dMountainDict))
$(eval $(call 2DMOUNTAIN_TEMPLATE,openfoam/cases/mesh/btf/schaerExp/resting,mesh-btf-schaerExp-resting,openfoam/cases/mesh/noOrography/resting,openfoam/cases/mesh/2dMountain/btf-schaerExp-resting.add2dMountainDict))
$(eval $(call 2DMOUNTAIN_TEMPLATE,openfoam/cases/mesh/sleve/schaerCos/resting,mesh-sleve-schaerCos-resting,openfoam/cases/mesh/noOrography/resting,openfoam/cases/mesh/2dMountain/sleve-schaerCos-resting.add2dMountainDict))
$(eval $(call 2DMOUNTAIN_TEMPLATE,openfoam/cases/mesh/sleve/schaerExp/resting,mesh-sleve-schaerExp-resting,openfoam/cases/mesh/noOrography/resting,openfoam/cases/mesh/2dMountain/sleve-schaerExp-resting.add2dMountainDict))
$(eval $(call 2DMOUNTAIN_TEMPLATE,openfoam/cases/mesh/snapCol-2dMountain/schaerExp/resting,mesh-snapCol-2dMountain-schaerExp-resting,openfoam/cases/mesh/noOrography/resting,openfoam/cases/mesh/2dMountain/snapCol-schaerExp-resting.add2dMountainDict))
$(eval $(call 2DMOUNTAIN_TEMPLATE,openfoam/cases/mesh/btf/schaerExp/gravityWaves,mesh-btf-schaerExp-gravityWaves,openfoam/cases/mesh/noOrography/gravityWaves,openfoam/cases/mesh/2dMountain/btf-schaerExp-gravityWaves.add2dMountainDict))
